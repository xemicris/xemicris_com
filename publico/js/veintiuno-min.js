const juego=(()=>{"use strict";let e=[],t=["C","D","P","T"],n=["A","J","D","R"],r=0,a=0,i="",o,l,u=document.querySelector("#btnNuevo"),s=document.querySelector("#btnPedir"),d=document.querySelector("#btnParar"),c=document.querySelector("#jugador-cartas"),$=document.querySelector("#maquina-cartas"),b=document.querySelector("#nombreJugador"),g=document.querySelectorAll("small")[0],f=document.querySelectorAll("small")[1];toastr.options={closeButton:!0,positionClass:"toast-top-center",showDuration:"200",hideDuration:"800",timeOut:"2000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};let h=()=>{e=m(),r=0,a=0,g.innerText=0,f.innerText=0,c.innerHTML="",$.innerHTML="",s.disabled=!1,d.disabled=!1};function p(){do o=prompt("\xbfIntroduce tu nombre por favor?");while(null===o||""===o);b.innerText=o+" -"}let m=()=>{e=[];for(let r=2;r<=10;r++)for(let a of t)e.push(r+a);for(let i in t)for(let o of n)e.push(o+t[i]);return _.shuffle(e)},q=()=>{if(0===e.length)throw"No hay cartas en la baraja";return e.splice(0,1)[0]},y=e=>{let t=e.substring(0,e.length-1);return l=isNaN(t)?"A"===t?11:10:parseInt(t)},T=e=>{i="maquina";do{let t=q();a=v(i,t),w(i,a),E(i,t)}while(a<e&&e<=21);L(r,a)};function v(e,t){return"jugador"===e?r+=y(t):a+=y(t)}function w(e,t){"jugador"===e?g.innerText=t:f.innerHTML=t}function E(e,t){let n=document.createElement("img");n.setAttribute("class","carta"),"jugador"===e?(n.setAttribute("src",`./publico/imagenes/veintiuno/${t}.png`),c.append(n)):"maquina"==e&&(n.setAttribute("src",`./publico/imagenes/veintiuno/${t}.png`),$.append(n))}function L(e,t){e>21?toastr.error("Gana la banca"):e>t?toastr.success(`Gana ${o}`):e<t&&t<=21?toastr.error("Gana la banca"):e<t&&t>21?toastr.success(`Gana ${o}`):toastr.warning("Empate")}return u.addEventListener("click",()=>{h()}),s.addEventListener("click",()=>{i="jugador";let e=q();r=v(i,e),w(i,r),E(i,e),r>=21&&(s.disabled=!0,d.disabled=!0,T(r))}),d.addEventListener("click",()=>{T(r),s.disabled=!0,d.disabled=!0}),document.addEventListener("DOMContentLoaded",()=>{setTimeout(p,400)}),{empezarPartida:h}})();