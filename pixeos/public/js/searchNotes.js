import{getProjectRoute}from"./getProjectRoutes.js";const server=getProjectRoute();import{note}from"./note.js";import{noNotes}from"./noNotes.js";function enter(e){"Enter"==e.key&&(e.preventDefault(),getData())}function enlace(){const e=document.createElement("a");e.href=`${server}/pixeos/panel/index`;const t=document.createElement("img");return t.className="aspa-buscador",t.src=`${server}/pixeos/public/images/cerrar.svg`,t.alt="aspa para cerrar el buscador",e.appendChild(t),e}function botonDinamico(){const e=document.createElement("li");e.className="barra-color";const t=document.createElement("a");t.href=`${server}/pixeos/panel/index`,t.id="crear",t.className="cambio-color nav-link px-3 active mb-3";const o=document.createElement("span");o.className="me-1";const n=document.createElement("i");n.className="bi bi-house";const r=document.createElement("span");return r.textContent="Inicio",o.appendChild(n),t.appendChild(o),t.appendChild(r),e.appendChild(t),e}async function getData(){let e=!1,t=!0,o=!1;const n=document.getElementById("btnBuscar");let r=document.getElementById("inputBuscar").value;try{const a=document.getElementById("activarInicio");let c=document.querySelector(".proyectos");const d=new FormData;d.append("nombre",r);let i=await fetch(`${server}/pixeos/panel/search`,{method:"POST",mode:"cors",cache:"no-cache",body:d}),s=await i.json();if(0!=s)if(0!=s.proyecto.length){for(;n.hasChildNodes();)n.removeChild(n.firstChild);for(n.appendChild(enlace()),a.appendChild(botonDinamico());c.hasChildNodes();)c.removeChild(c.firstChild);for(let n=0;n<s.proyecto.length;n++)s.proyecto[n].tareas.map((e=>{e.estado})),e=s.proyecto[n].compartida>0,t=!s.proyecto[n].ko,o="1"==s.proyecto[n].completado,c.appendChild(note(o,s.proyecto[n].urlProyecto,s.proyecto[n].colorProyecto,s.proyecto[n].nombreProyecto,s.proyecto[n].tareas,s.proyecto[n].id,e,t))}else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);for(;c.hasChildNodes();)c.removeChild(c.firstChild);n.appendChild(enlace()),c.appendChild(noNotes()),a.appendChild(botonDinamico())}else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);for(n.appendChild(enlace()),a.appendChild(botonDinamico());c.hasChildNodes();)c.removeChild(c.firstChild)}}catch(e){}}document.getElementById("btnBuscar").addEventListener("click",getData),document.getElementById("inputBuscar").addEventListener("keypress",enter);